<extend name="template/base_index" />


<block name="area_header">
		<link rel="stylesheet" type="text/css" href="__CDN__/jquery-ztree/3.5/css/zTreeStyle/zTreeStyle.css" />
		<script type="text/javascript" src="__CDN__/jquery-ztree/3.5/js/jquery.ztree.core-3.5.min.js"></script>
		<script type="text/javascript" src="__CDN__/jquery-ztree/3.5/js/jquery.ztree.excheck-3.5.min.js"></script>
		<script type="text/javascript" src="__CDN__/jquery-ztree/3.5/js/jquery.ztree.exedit-3.5.min.js"></script>
</block>

<block name="area_body">
	{:W('Menus/topbar')}
	<div class="admin-main container-fluid">
		{:W('Menus/left')}
		<div class="admin-main-content">
			{:W('Menus/breadcrumb')}
		
			<!-- 带验证 form -->
			<form class="form-horizontal well validateForm">
				<fieldset>
					<legend>选择需要参与测验的机构
						</legend>
					<div class="form-group">
						<label for="btns" class="col-md-2 col-lg-2 control-label">&nbsp;</label>
						<div class="col-lg-10 col-md-10">
							<a target-form="validateForm" class="ajax-post btn btn-sm btn-primary" href="{:U('Admin/TestSys/org')}" autofocus="autofocus"><i class="fa fa-save"></i> {:L('BTN_SAVE')}</a>
							<a class="btn btn-default  btn-sm" href="{:U('Admin/TestSys/index')}"><i class="fa fa-reply"></i>返回</a>
						</div>
					</div>
					
					<div class="form-group">
						<label for="btns" class="col-md-2 col-lg-2 control-label">&nbsp;</label>
						<div class="col-lg-10 col-md-10">
							
			<div id="ruler" class="ruler" title="拖拽可调整节点数">
				<div id="cursor" class="cursor">5000</div>
			</div>
							<ul id="tree"></ul>
						</div>
					</div>
					
					<div class="form-group">
						<label for="btns" class="col-md-2 col-lg-2 control-label">&nbsp;</label>
						<div class="col-lg-10 col-md-10">
							<a target-form="validateForm" class="ajax-post btn btn-sm btn-primary" href="{:U('Admin/TestSys/org')}" autofocus="autofocus"><i class="fa fa-save"></i> {:L('BTN_SAVE')}</a>
							<a class="btn btn-default  btn-sm" href="{:U('Admin/TestSys/index')}"><i class="fa fa-reply"></i>返回</a>
						</div>
					</div>
				</fieldset>
			</form>
			<!-- form -->

		</div>
		<!-- END admin-main-content -->
	</div>
		<!-- END admin-main-->
</block>

<block name="area_footer">
<script>
		var setting = {
			check: {
				enable: true
			},
			data: {
				simpleData: {
					enable: true,
					idKey: "id",
					pIdKey: "father",
					rootPId: 0
				}
			},
			callback: {
				onNodeCreated: onNodeCreated
			}
			
		};
		
		var dataMaker = function() {
			var id = 0;
			$.ajax({
				type:"post",
				url:"{:U('Admin/TestSys/org_json')}?id="+id,
				async:true,
				beforeSend:function(){
					
				}				
			}).done(function(data){
				console.log(data);
			}).always(function(){
				
			});
			return nodes;
		}
		

		function createTree () {
			var zNodes = dataMaker();
			$("#tree").empty();
			var time1 = new Date();
			$.fn.zTree.init($("#treeDemo"), setting, zNodes);
			var time2 = new Date();
			
		}

		
		$(document).ready(function(){
			createTree();
		});
		</script>



</block>